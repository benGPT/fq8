{% extends "home.html" %}
{% block content %}
<h2>Staff Details: {{ staff.user.first_name }} {{ staff.user.last_name }}</h2>

<h3>Personal Information</h3>
<ul>
    <li>Email: {{ staff.user.email }}</li>
    <li>Phone: {{ staff.user.phone_number }}</li>
    <li>Position: {{ staff.position }}</li>
    <li>Department: {{ staff.department }}</li>
    <li>Hire Date: {{ staff.hire_date }}</li>
</ul>

<h3>Actions</h3>
<ul>
    <li><a href="{{ url_for('admin_assign_shift', staff_id=staff.id) }}">Assign Shift</a></li>
    <li><a href="{{ url_for('admin_add_benefit', staff_id=staff.id) }}">Add Benefit</a></li>
</ul>

<h3>Recent Attendances</h3>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Check In</th>
            <th>Check Out</th>
        </tr>
    </thead>
    <tbody>
        {% for attendance in staff.attendances[-5:] %}
        <tr>
            <td>{{ attendance.date }}</td>
            <td>{{ attendance.check_in.strftime('%H:%M') }}</td>
            <td>{{ attendance.check_out.strftime('%H:%M') if attendance.check_out else 'Not checked out' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>Upcoming Shifts</h3>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>Location</th>
            <th>Role</th>
        </tr>
    </thead>
    <tbody>
        {% for shift in staff.shifts %}
        {% if shift.start_time > now %}
        <tr>
            <td>{{ shift.start_time.strftime('%Y-%m-%d') }}</td>
            <td>{{ shift.start_time.strftime('%H:%M') }}</td>
            <td>{{ shift.end_time.strftime('%H:%M') }}</td>
            <td>{{ shift.location }}</td>
            <td>{{ shift.role }}</td>
        </tr>
        {% endif %}
        {% endfor %}
    </tbody>
</table>

<h3>Recent Leave Requests</h3>
<table>
    <thead>
        <tr>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Reason</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for leave in staff.leaves[-5:] %}
        <tr>
            <td>{{ leave.start_date }}</td>
            <td>{{ leave.end_date }}</td>
            <td>{{ leave.reason }}</td>
            <td>{{ leave.status }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}

